<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>School Committee</title>

<style>
body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #eef2f6;
    margin: 0;
    padding: 20px;
}

.container {
    max-width: 1200px;
    margin: auto;
}

h1 {
    text-align: center;
    color: #1f3c88;
    margin-bottom: 15px;
}

.filter {
    text-align: center;
    margin-bottom: 25px;
}

select {
    padding: 8px 14px;
    font-size: 16px;
    border-radius: 6px;
}

.cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 20px;
}

.card {
    background: white;
    border-radius: 10px;
    padding: 18px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border-top: 6px solid #1f3c88;
    transition: transform 0.2s;
}

.card:hover {
    transform: translateY(-5px);
}

.role {
    font-weight: bold;
    color: #1f3c88;
    font-size: 18px;
    margin-bottom: 6px;
}

.name {
    font-size: 16px;
    color: #333;
}

.footer {
    text-align: center;
    margin-top: 30px;
    color: #666;
    font-size: 14px;
}
</style>
</head>

<body>

<div class="container">
    <h1>School Managing Committee</h1>

    <div class="filter">
        <label><strong>Select Year:</strong></label>
        <select id="yearSelect"></select>
    </div>

    <div class="cards" id="cards"></div>

    <div class="footer">
        Â© School Committee Portal
    </div>
</div>

<script>
const apiUrl = "https://script.google.com/macros/s/AKfycbzv9pGwD4qlGhlftt2Bwz_au7qGIvaFQo8E3piyzntk0GRO_ciDoNC0VP76ION8uW0/exec";

let sheetData = [];

fetch(apiUrl)
  .then(res => res.json())
  .then(data => {
    sheetData = data;
    populateYears();
  })
  .catch(err => console.error("API Error:", err));

function populateYears() {
    const yearSelect = document.getElementById("yearSelect");

    const years = sheetData.map(r => r.Designation); // year column
    years.forEach(y => {
        const opt = document.createElement("option");
        opt.value = y;
        opt.textContent = y;
        yearSelect.appendChild(opt);
    });

    yearSelect.addEventListener("change", () => {
        renderCards(yearSelect.value);
    });

    renderCards(years[0]);
}

function renderCards(year) {
    const container = document.getElementById("cards");
    container.innerHTML = "";

    const row = sheetData.find(r => r.Designation == year);
    if (!row) return;

    Object.keys(row).forEach(key => {
        if (key !== "Designation" && row[key]) {
            container.innerHTML += `
                <div class="card">
                    <div class="role">${key}</div>
                    <div class="name">${row[key]}</div>
                </div>
            `;
        }
    });
}
</script>

</body>
</html>
